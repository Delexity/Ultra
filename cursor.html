<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
<script>
  // Firebase configuration
  const firebaseConfig = {
    databaseURL: "https://cursor-d3be2-default-rtdb.firebaseio.com/",
    apiKey: "AIzaSyB_hzolxZ5TRuPOPnjZ5dIUY_lsNfTOQi0",
    authDomain: "cursor-d3be2.firebaseapp.com",
    projectId: "cursor-d3be2",
    storageBucket: "cursor-d3be2.appspot.com",
    messagingSenderId: "720790815052",
    appId: "1:720790815052:web:9846b1bf702bbca6c50fe9"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Get a reference to the database service
  const database = firebase.database();

  // Get a reference to the cursors location in the database
  const cursorsRef = database.ref("cursors");

function updateCursorPosition(x, y) {
  const timestamp = firebase.database.ServerValue.TIMESTAMP;
  cursorsRef.push({
    x: x,
    y: y,
    timestamp: timestamp
  });
}

  // Function to display the cursors on the page
  function displayCursor(cursorId, x, y) {
    const cursor = document.createElement("div");
    cursor.id = cursorId;
    cursor.style.position = "absolute";
    cursor.style.width = "10px";
    cursor.style.height = "10px";
    cursor.style.borderRadius = "50%";
    cursor.style.backgroundColor = "yellow";
    cursor.style.left = x + "px";
    cursor.style.top = y + "px";
    document.body.appendChild(cursor);
  }

  // Function to remove a cursor from the page and the database
  function removeCursor(cursorId) {
    const cursor = document.getElementById(cursorId);
    if (cursor) {
      cursor.remove();
      cursorsRef.child(cursorId).remove();
    }
  }

  // Listen for new cursor positions in the database
  cursorsRef.on("child_added", function(snapshot) {
    const cursor = snapshot.val();
    displayCursor(snapshot.key, cursor.x, cursor.y);
  });

  // Listen for mouse movements and update the cursor position in the database
  document.addEventListener("mousemove", function(event) {
    updateCursorPosition(event.clientX, event.clientY);
  });

  // Remove all cursors when the mouse leaves the page
  document.addEventListener("mouseleave", function() {
    cursorsRef.once("value", function(snapshot) {
      snapshot.forEach(function(childSnapshot) {
        removeCursor(childSnapshot.key);
      });
    });
  });

  // Add a button to remove all cursors
  const removeButton = document.createElement("button");
  removeButton.textContent = "Remove All Cursors";
  removeButton.addEventListener("click", function() {
    cursorsRef.once("value", function(snapshot) {
      snapshot.forEach(function(childSnapshot) {
        removeCursor(childSnapshot.key);
      });
    });
  });
  document.body.appendChild(removeButton);
</script>
